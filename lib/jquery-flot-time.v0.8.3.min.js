(function(e){var t={xaxis:{timezone:null,timeformat:null,twelveHourClock:false,monthNames:null}};function r(e,t){return t*Math.floor(e/t)}function i(e,t,r,i){if(typeof e.strftime=="function"){return e.strftime(t)}var a=function(e,t){e=""+e;t=""+(t==null?"0":t);return e.length==1?t+e:e};var n=[];var o=false;var s=e.getHours();var u=s<12;if(r==null){r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}if(i==null){i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}var l;if(s>12){l=s-12}else if(s==0){l=12}else{l=s}for(var f=0;f<t.length;++f){var m=t.charAt(f);if(o){switch(m){case"a":m=""+i[e.getDay()];break;case"b":m=""+r[e.getMonth()];break;case"d":m=a(e.getDate());break;case"e":m=a(e.getDate()," ");break;case"h":case"H":m=a(s);break;case"I":m=a(l);break;case"l":m=a(l," ");break;case"m":m=a(e.getMonth()+1);break;case"M":m=a(e.getMinutes());break;case"q":m=""+(Math.floor(e.getMonth()/3)+1);break;case"S":m=a(e.getSeconds());break;case"y":m=a(e.getFullYear()%100);break;case"Y":m=""+e.getFullYear();break;case"p":m=u?""+"am":""+"pm";break;case"P":m=u?""+"AM":""+"PM";break;case"w":m=""+e.getDay();break}n.push(m);o=false}else{if(m=="%"){o=true}else{n.push(m)}}}return n.join("")}function a(e){function t(e,t,r,i){e[t]=function(){return r[i].apply(r,arguments)}}var r={date:e};if(e.strftime!=undefined){t(r,"strftime",e,"strftime")}t(r,"getTime",e,"getTime");t(r,"setTime",e,"setTime");var i=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"];for(var a=0;a<i.length;a++){t(r,"get"+i[a],e,"getUTC"+i[a]);t(r,"set"+i[a],e,"setUTC"+i[a])}return r}function n(e,t){if(t.timezone=="browser"){return new Date(e)}else if(!t.timezone||t.timezone=="utc"){return a(new Date(e))}else if(typeof timezoneJS!="undefined"&&typeof timezoneJS.Date!="undefined"){var r=new timezoneJS.Date;r.setTimezone(t.timezone);r.setTime(e);return r}else{return a(new Date(e))}}var o={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:30*24*60*60*1e3,quarter:3*30*24*60*60*1e3,year:365.2425*24*60*60*1e3};var s=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]];var u=s.concat([[3,"month"],[6,"month"],[1,"year"]]);var l=s.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function f(t){t.hooks.processOptions.push(function(t,a){e.each(t.getAxes(),function(e,t){var a=t.options;if(a.mode=="time"){t.tickGenerator=function(e){var t=[];var i=n(e.min,a);var s=0;var f=a.tickSize&&a.tickSize[1]==="quarter"||a.minTickSize&&a.minTickSize[1]==="quarter"?l:u;if(a.minTickSize!=null){if(typeof a.tickSize=="number"){s=a.tickSize}else{s=a.minTickSize[0]*o[a.minTickSize[1]]}}for(var m=0;m<f.length-1;++m){if(e.delta<(f[m][0]*o[f[m][1]]+f[m+1][0]*o[f[m+1][1]])/2&&f[m][0]*o[f[m][1]]>=s){break}}var c=f[m][0];var h=f[m][1];if(h=="year"){if(a.minTickSize!=null&&a.minTickSize[1]=="year"){c=Math.floor(a.minTickSize[0])}else{var v=Math.pow(10,Math.floor(Math.log(e.delta/o.year)/Math.LN10));var k=e.delta/o.year/v;if(k<1.5){c=1}else if(k<3){c=2}else if(k<7.5){c=5}else{c=10}c*=v}if(c<1){c=1}}e.tickSize=a.tickSize||[c,h];var d=e.tickSize[0];h=e.tickSize[1];var g=d*o[h];if(h=="second"){i.setSeconds(r(i.getSeconds(),d))}else if(h=="minute"){i.setMinutes(r(i.getMinutes(),d))}else if(h=="hour"){i.setHours(r(i.getHours(),d))}else if(h=="month"){i.setMonth(r(i.getMonth(),d))}else if(h=="quarter"){i.setMonth(3*r(i.getMonth()/3,d))}else if(h=="year"){i.setFullYear(r(i.getFullYear(),d))}i.setMilliseconds(0);if(g>=o.minute){i.setSeconds(0)}if(g>=o.hour){i.setMinutes(0)}if(g>=o.day){i.setHours(0)}if(g>=o.day*4){i.setDate(1)}if(g>=o.month*2){i.setMonth(r(i.getMonth(),3))}if(g>=o.quarter*2){i.setMonth(r(i.getMonth(),6))}if(g>=o.year){i.setMonth(0)}var M=0;var y=Number.NaN;var S;do{S=y;y=i.getTime();t.push(y);if(h=="month"||h=="quarter"){if(d<1){i.setDate(1);var z=i.getTime();i.setMonth(i.getMonth()+(h=="quarter"?3:1));var p=i.getTime();i.setTime(y+M*o.hour+(p-z)*d);M=i.getHours();i.setHours(0)}else{i.setMonth(i.getMonth()+d*(h=="quarter"?3:1))}}else if(h=="year"){i.setFullYear(i.getFullYear()+d)}else{i.setTime(y+g)}}while(y<e.max&&y!=S);return t};t.tickFormatter=function(e,t){var r=n(e,t.options);if(a.timeformat!=null){return i(r,a.timeformat,a.monthNames,a.dayNames)}var s=t.options.tickSize&&t.options.tickSize[1]=="quarter"||t.options.minTickSize&&t.options.minTickSize[1]=="quarter";var u=t.tickSize[0]*o[t.tickSize[1]];var l=t.max-t.min;var f=a.twelveHourClock?" %p":"";var m=a.twelveHourClock?"%I":"%H";var c;if(u<o.minute){c=m+":%M:%S"+f}else if(u<o.day){if(l<2*o.day){c=m+":%M"+f}else{c="%b %d "+m+":%M"+f}}else if(u<o.month){c="%b %d"}else if(s&&u<o.quarter||!s&&u<o.year){if(l<o.year){c="%b"}else{c="%b %Y"}}else if(s&&u<o.year){if(l<o.year){c="Q%q"}else{c="Q%q %Y"}}else{c="%Y"}var h=i(r,c,a.monthNames,a.dayNames);return h}}})})}e.plot.plugins.push({init:f,options:t,name:"time",version:"1.0"});e.plot.formatDate=i;e.plot.dateGenerator=n})(jQuery);