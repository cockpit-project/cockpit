if ENABLE_DOC

GUIDE_MAIN_ADOC_FILE = doc/guide/cockpit-guide.adoc

GUIDE_ADOC_FILES = \
	doc/guide/modules/ROOT/pages/api-cockpit.adoc \
	doc/guide/modules/ROOT/pages/api-base1.adoc \
	doc/guide/modules/ROOT/pages/api-shell.adoc \
	doc/guide/modules/ROOT/pages/api-system.adoc \
	doc/guide/modules/ROOT/pages/cockpit-cache.adoc \
	doc/guide/modules/ROOT/pages/cockpit-channel.adoc \
	doc/guide/modules/ROOT/pages/cockpit-dbus.adoc \
	doc/guide/modules/ROOT/pages/cockpit-error.adoc \
	doc/guide/modules/ROOT/pages/cockpit-file.adoc \
	doc/guide/modules/ROOT/pages/cockpit-http.adoc \
	doc/guide/modules/ROOT/pages/cockpit-locale.adoc \
	doc/guide/modules/ROOT/pages/cockpit-location.adoc \
	doc/guide/modules/ROOT/pages/cockpit-manifest.adoc \
	doc/guide/modules/ROOT/pages/cockpit-metrics.adoc \
	doc/guide/modules/ROOT/pages/cockpit-series.adoc \
	doc/guide/modules/ROOT/pages/cockpit-session.adoc \
	doc/guide/modules/ROOT/pages/cockpit-spawn.adoc \
	doc/guide/modules/ROOT/pages/cockpit-util.adoc \
	doc/guide/modules/ROOT/pages/multi-host.adoc \
	doc/guide/modules/ROOT/pages/authentication.adoc \
	doc/guide/modules/ROOT/pages/embedding.adoc \
	doc/guide/modules/ROOT/pages/feature-firewall.adoc \
	doc/guide/modules/ROOT/pages/feature-journal.adoc \
	doc/guide/modules/ROOT/pages/feature-machines.adoc \
	doc/guide/modules/ROOT/pages/feature-networkmanager.adoc \
	doc/guide/modules/ROOT/pages/feature-packagekit.adoc \
	doc/guide/modules/ROOT/pages/feature-pcp.adoc \
	doc/guide/modules/ROOT/pages/feature-realmd.adoc \
	doc/guide/modules/ROOT/pages/feature-selinux.adoc \
	doc/guide/modules/ROOT/pages/feature-sosreport.adoc \
	doc/guide/modules/ROOT/pages/feature-storaged.adoc \
	doc/guide/modules/ROOT/pages/feature-systemd.adoc \
	doc/guide/modules/ROOT/pages/feature-terminal.adoc \
	doc/guide/modules/ROOT/pages/feature-tuned.adoc \
	doc/guide/modules/ROOT/pages/feature-users.adoc \
	doc/guide/modules/ROOT/pages/packages.adoc \
	doc/guide/modules/ROOT/pages/privileges.adoc \
	doc/guide/modules/ROOT/pages/https.adoc \
	doc/guide/modules/ROOT/pages/index.adoc \
	doc/guide/modules/ROOT/pages/listen.adoc \
	doc/guide/modules/ROOT/pages/sso.adoc \
	doc/guide/modules/ROOT/pages/cert-authentication.adoc \
	doc/guide/modules/ROOT/pages/startup.adoc \
	doc/guide/modules/ROOT/pages/urls.adoc \
	$(NULL)

MAN_ADOC_FILES = \
	doc/guide/modules/man/pages/cockpit.1.adoc \
	doc/guide/modules/man/pages/cockpit-bridge.1.adoc \
	doc/guide/modules/man/pages/cockpit-desktop.1.adoc \
	doc/guide/modules/man/pages/cockpit-ws.8.adoc \
	doc/guide/modules/man/pages/cockpit-tls.8.adoc \
	doc/guide/modules/man/pages/cockpit.conf.5.adoc \
	doc/guide/modules/man/pages/pam_ssh_add.8.adoc \
	$(NULL)

dist_noinst_DATA += \
	$(GUIDE_MAIN_ADOC_FILE) \
	$(MAN_ADOC_FILES) \
	$(GUIDE_ADOC_FILES) \
	$(NULL)

noinst_DATA += \
	doc/output/html/* \
	$(NULL)

render-docs: $(GUIDE_ADOC_FILES) $(GUIDE_MAIN_ADOC_FILE) $(MAN_ADOC_FILES) $(GUIDE_ADOC_FILES)
	mkdir -p doc/output/html/
	$(ASCIIDOCTOR) -a cockpit-version=$(VERSION) -b html5 -D doc/output/html $(GUIDE_MAIN_ADOC_FILE) $(GUIDE_ADOC_FILES) $(MAN_ADOC_FILES)

doc/output/html/*: render-docs

CLEAN_LOCAL_TARGETS += clean-guide
clean-guide:
	rm -rf doc/output/html

INSTALL_DATA_LOCAL_TARGETS += install-guide
install-guide:
	mkdir -p $(DESTDIR)$(htmldir)
	$(INSTALL_DATA) doc/output/html/* $(DESTDIR)$(htmldir)

UNINSTALL_LOCAL_TARGETS += uninstall-guide
uninstall-guide:
	rm -rf $(DESTDIR)$(htmldir)

endif ENABLE_DOC
